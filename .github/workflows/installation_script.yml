name: Installation script
on: 
  pull_request:
  push:
    branches:
      - master

jobs:
  install_on_linux:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - shell: fish
            source: ~/.config/fish/config.fish
          - shell: zsh
            source: ~/.zshrc
          - shell: bash
            source: ~/.bashrc
    steps:
      - uses: actions/checkout@v2
      - run: "sudo apt-get install -y ${{ matrix.shell }}"
        name: Install shell
      - run: "env SHELL=$(which ${{ matrix.shell }}) bash ./.ci/install.sh"
        name: Run the installation script
      - run: "${{ matrix.shell }} -c '. ${{ matrix.source }}; cat ${{ matrix.source }}; echo $PATH; fnm --version'"
        name: 'Print fnm version'
